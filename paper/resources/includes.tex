% -------------------------------------------------------------
% Create Options
% -------------------------------------------------------------
% . PDF properties
%\pdfinterwordspaceon
%\pdfminorversion=8

\RequirePackage{amsmath}
\RequirePackage{amsthm}
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\RequirePackage{etoolbox}


% \RequirePackage{lscape}
% \RequirePackage{multicol}
% \RequirePackage{bm}
% \RequirePackage{multirow}


% 1 inch margins
\RequirePackage[left=1.0in,right=1.0in,top=1.0in,bottom=1.0in]{geometry}


% Sundry formatting
\RequirePackage{graphicx}
\RequirePackage[usenames,dvipsnames,svgnames,table]{xcolor}
\RequirePackage{setspace}
\RequirePackage[hang,flushmargin]{footmisc}
    \setlength{\footnotesep}{\baselineskip}
\RequirePackage{microtype}
    \DisableLigatures[f]{}
    % disable those annoying fi ligature characters. Kerning is overrated.





% Add link packages, xr-hyper before hyperref as per instructions
\RequirePackage{xr-hyper}
\RequirePackage[colorlinks=true,hyperfootnotes=true,raiselinks=true,breaklinks=false,allcolors=blue]{hyperref}
    % From JF example tex
    \hypersetup{colorlinks=true,raiselinks=true,breaklinks=false,citecolor=blue}




% References
\RequirePackage[english]{babel}
\RequirePackage[round,comma,longnamesfirst]{natbib}
    % See http://merkel.texture.rocks/Latex/natbib.php
    \setcitestyle{aysep={}}
    % From JF example tex file:
    \makeatletter
    % Patch case where name and year are separated by aysep
    \patchcmd{\NAT@citex}
      {\@citea\NAT@hyper@{%
         \NAT@nmfmt{\NAT@nm}%
         \hyper@natlinkbreak{\NAT@aysep\NAT@spacechar}{\@citeb\@extra@b@citeb}%
         \NAT@date}}
      {\@citea\NAT@nmfmt{\NAT@nm}%
       \NAT@aysep\NAT@spacechar\NAT@hyper@{\NAT@date}}{}{}

    % Patch case where name and year are separated by opening bracket
    \patchcmd{\NAT@citex}
      {\@citea\NAT@hyper@{%
         \NAT@nmfmt{\NAT@nm}%
         \hyper@natlinkbreak{\NAT@spacechar\NAT@@open\if*#1*\else#1\NAT@spacechar\fi}%
           {\@citeb\@extra@b@citeb}%
         \NAT@date}}
      {\@citea\NAT@nmfmt{\NAT@nm}%
       \NAT@spacechar\NAT@@open\if*#1*\else#1\NAT@spacechar\fi\NAT@hyper@{\NAT@date}}
      {}{}
    \makeatother


% Table formatting
\RequirePackage{dcolumn}
\RequirePackage{pdflscape}
\RequirePackage{longtable}
\RequirePackage{tabularx}
    \newcolumntype{Y}{>{\centering\arraybackslash}X}
\RequirePackage{booktabs}


% Captions
\RequirePackage[center,large,bf]{caption}
\RequirePackage{subcaption}
    % Figure formatting
    %\DeclareCaptionLabelFormat{panel}{Panel #1Ëœ#2}
    \DeclareCaptionLabelFormat{panel}{Panel~#2}
    \captionsetup[table]{labelsep=newline}
    \captionsetup[figure]{labelfont={bf},labelsep=period,font={normalsize},justification=justified}
    \captionsetup[subfigure]{labelfont={},labelsep=period,name={Panel},labelformat=panel}


\RequirePackage{abstract}
    \date{}




% IA to main table references
\RequirePackage{xr}


% Advanced section header editing
% \RequirePackage{sectsty}
% Advanced title and section header editing
\RequirePackage{titlesec}


% This gets run from ../ by the main file.
% This breaks the caption package.
\RequirePackage{./resources/jf}


% Always indent after section heading
\makeatletter
\let\@afterindentfalse\@afterindenttrue
\@afterindenttrue
\makeatother

\widowpenalty10000
\clubpenalty10000

% This gets run from ../ by the main file.
\input{./resources/commands}
\input{./resources/environments}
